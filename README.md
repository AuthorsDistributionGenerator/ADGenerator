# ADGenerator
Companion code to the paper [Delabays and Tyloo, *arXiv preprint: 2011.05703* (2022)](arxiv.org/abs/2011.05703)
Script generating a distribution of authors in a synthetic journal.




## List of functions
- [gamma](#gamma)
- [generate\_distr](#generate\_distr)
- [get\_ages](#get\_ages)
- [get\_Ns](#get\_Ns)
- [init\_authors](#init\_authors)
- [rand\_age](rand\_age)
- [retrieve\_params](#retrieve\_params)
- [share](#share)


## Detailed documentation for the functions

### gamma

- `gamma(Ns::Vector{Int64})`

Returns the normalization factor such that sum\_k gamma\*k\*Tk = 1 in the function `generate_distr`.

**INPUT**:\
`Ns`: Vector of `Int64`, whose k-th component is the number of authors with k papers. Typically the output of `get_Ns`.

**OUTPUT**:\
`γ`: Normalization factor.

---

### generate\_distr

- `generate\_distr(authors::Dict{Int64,Any}, n_year::Int64, ppyear::Int64, ρ0::Float64, amin::Int64=40, amax::Int64=60, savefolder::String="")`
- `generate_distr(n_year::Int64, ppyear::Int64, ρ0::Float64, amin::Int64=40, amax::Int64=60, savefolder::String="")`

Generates a synthetic list of authors with random number of publications in a synthetic journal. The rule of attribution of an author to a new journal follows the adapted preferential attachment rule described in [Delabays and Tyloo (2022)](arxiv.org/abs/2011.05703). 

**INPUT**:\
`authors`: Dictionary whose keys (Int64) are the authors indices, and values are themselves dictionaries with "String" keys:\
	- "age": is the academic age of the author;\
	- "npaper": is the current number of paper of this author in the journal.\
If the `authors` argument is not given, then it is arbitrarily generated by the function `init_authors`.\
`n_years`: Number of years over which the generator is run. Namely this is the number of iterations.\
`ppyear`: Number of papers published each year in the synthetic journal.\
`ρ0`: Average proportion of papers that are attributed to new authors each year.\
`amin`: Academic age at which the likelihood of publishing new papers start decreasing.\
`amax`: Academic age at which the likelihood of publishing new papers vanishes.\
`savefolder`: Name of the folder where data are saved. The results are saved in a .csv file (`savefolder*/d_######.csv"`) identified by a six-digit number, generated not to overlap with existing ones. The arguments of the script are saved in `savefolder*"/p_######.jl"`. If `savefolder` is an empty string, data are not saved.

**OUTPUT**:\
`v`: Vector of the number of papers of each author at the end of the process.

---

### get\_ages

- `get_ages(authors::Dict{Int64,Any}, authk::Vector{Int64})`

Returns the vector of ages of the authors listed in authk.

**INPUT**:\
`authors`: Dictionary whose keys are the authors indices and whose values are themselves dictionaries, with two string keys:\
        - "age": is the academic age of the authors;\
        - "npaper": is the current number of papers of this author in the journal.\
`authk`: List of authors indices. Typically a component of the output `authks` of the function `get_Ns`.

**OUTPUT**:\
`ages`: Vector of the ages of the authors in `authk`.

---

### get\_Ns

`get_Ns(authors::Dict{Int64,Any})`

Returns, for each possible number of papers `k`, the number of authors with `k` papers.

**INPUT**:\
`authors`: Dictionary whose keys are the authors indices and whose values are themselves dictionaries, with two string keys:\
        - "age": is the academic age of the authors;\
        - "npaper": is the current number of papers of this author in the journal.

**OUTPUT**:\
`Ns`: Vector of `Int64`, whose k-th component is the number of authors with k papers.\
`authks`: Vector of `Vector{Int64}` whose k-th component is the list of authors (indices) with k papers.

---

### init\_authors

- `init_authors(ppyear::Int64)`

Arbitrary initialization of the list of authors the `generate_distr` function. 

**INPUT**:\
`ppyear`: Number of papers published every year in the journal.

**OUTPUT**:\
`authors`: Dictionary whose keys are the authors indices and whose values are themselves dictionaries, with two string keys:\
        - "age": is the academic age of the authors;\
        - "npaper": is the current number of papers of this author in the journal.

---

### rand\_age

- `rand_age(p::Int64, ages::Vector{Int64}, ρ::Float64, amin::Int64=40, amax::Int64=60)`

Attributes `p` new papers to a group of authors, taking into account their ages.

**INPUT**:\
`p`: Number of papers to be attributed.\
`ages`: Vector of ages of the authors to which the papers will be attributed.\
`ρ`: Proportion of new authors.\
`amin`: Age at which production start reducing.\
`amax`: Age at which production vanishes.

**OUTPUT**:\
`ids`: List of indices of the authors who got a new article.

---

### retrieve\_params

- `retrieve_params(savefolder::String)`

Returns the list of parameters of the synthetic data in the folder `savefolder`, under the form of a dictionary, with keys being the simulation id's. 

**INPUT**:\
`savefolder`: Name of the folder where the data are saved.

**OUTPUT**:\
`params`: Dictionary whose keys are the simulations id's and the values are the lists of parameters of the simulations. 

---

### share

- `share(a::Int64, amin::Int64=40, amax::Int64=60)`
- `share(a::Vector{Int64}, amin::Int64=40, amax::Int64=60)`

Returns the number of years remaining before retirement at `amax`. Maximum is `amax - amin`.

**INPUT**:\
`a`: Actual age of the author (or a list of ages).\
`amin`: Age at which production start reducing.\
`amax`: Age at which production vanishes.

**OUTPUT**:\
`diff`: Minimum between the number of years remaining before retirement and the difference `amax - amin`.



